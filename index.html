<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Website</title>
        <style>

            img.gameIcon{
                border-radius:25px;
                height:100%;
                display: inline-block;
            }

            div.selectionBar{
                width:100%;
                background-color:rgb(40,40,40);
                overflow-x: scroll;
                white-space: nowrap;
                overflow-y:clip;
            }

            iframe.gameDisplay{
                width:100%;
            }      

            div.alert{
                position:absolute;
                border-radius:5px;
                left:35vw;
                top:35vh;
                width:30vw;
                height:30vh;
                background-color:rgb(60,60,60);
                text-align: center;
                color: "rgb(40,160,120)"
            }

            .prettyText{
                font-family:monospace;
                margin-left:10px;
                margin-right:10px;
            }
            
        </style>
    </head>
    <body style="background-color: black; overflow:clip;">
        <div class="alert">
            <h1 class="prettyText">Cloak?</h1>
            <p class="prettyText">Hey! I(more like my website) noticed that you haven't cloaked your tab in an about:blank(which is fine). However, I would recommend clicking below to cloak this website in an about:blank.</p>
            <span class="prettyText" onclick="cloak()">Cloak</span>
            <span class="prettyText" onclick="removeAlert()">Don't Cloak</span>
        </div>
        <div class="selectionBar"style="height:9vh;">
            <img class="gameIcon"onclick="changeGame(0)"src="boxIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(4)"src="galacticIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(6)"src="happyIcon.jpg"></img>
            <img class="gameIcon"onclick="changeGame(7)"src="geometryIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(5)"src="basketBall2020Icon.png"></img>
            <img class="gameIcon"onclick="changeGame(8)"src="retroBowlIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(9)"src="tankIcon.png"></img>
            <div style="width:20px;height:9vh;background-color:rgb(200,20,20);display:inline-block;"></div>
            <img class="gameIcon"onclick="changeGame(1)"src="vikingIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(2)"src="racingIcon.png"></img>
            <img class="gameIcon"onclick="changeGame(3)"src="slopeIcon.png"></img>
        </div>
        <iframe seamless="seamless"allowtransparency="true"allowfullscreen="true"class="gameDisplay"style="height:81vh;"></iframe>
        <script>
            const frame = document.body.querySelector("iframe")
            const selectionBar = document.body.querySelectorAll("div")[1]
            const games = []

            function toggleDropdown(){
                if(selectionBar.style.height=="20vh"){
                    selectionBar.style.height = "0vh"
                    frame.style.height = "100vh"
                } else{
                    selectionBar.style.height = "20vh"
                    frame.style.height = "80vh"
                }
            }

            function changeGame(game){
                frame.src = "about:blank"
                frame.removeAttribute("src")
                frame.removeAttribute("srcdoc")
                if(game==0){
                    frame.srcdoc = games[0]
                }
                if(game==1){
                    frame.src = "https://zv1y2i8p.play.gamezop.com/g/Umfd7yvMd"
                }
                if(game==2){
                    frame.src = "https://www.onlinegames.io/games/2022/construct/144/truck-racing/index.html"
                }
                if(game==3){
                    frame.src = "https://storage.y8.com/y8-studio/unity/joll/slope/?key=9757549&value=80527"
                }
                if(game==4){
                    frame.src = "https://idev.games/embed/galactic-wars"
                }
                if(game==5){
                    frame.src = "https://g.vseigru.net/7/igra-basketbol-golovami-na-dvoikh/"
                }
                if(game==6){
                    frame.src = "https://games-online.io/game/HappyWheels/"
                }
                if(game==7){
                    frame.src = "https://games-online.io/game/Geometry_Jump/"
                }
                if(game==8){
                    frame.src = "https://webglmath.github.io/retro-bowl/"
                }
                if(game==9){
                    frame.src = "https://www.friv2018.com/games/html5/tank-trouble-2/"
                }
            }

            //removes alert if window is in cloaked about:blank
            function inFrame(){
                try {
                    return window.self !== window.top;
                } catch (e) {
                    return true
                }
            }
            if(inFrame()){
                removeAlert()
            }

            function xhr(file,storage){
                const xhr = new XMLHttpRequest()
                xhr.open("GET",file)
                xhr.onload = function(){
                    games[storage] = xhr.response
                }
                xhr.send()
            }
            xhr("parkour.html",0)

            function removeAlert(){
                document.body.removeChild(document.body.querySelector("div"))
            }
            
            function cloak(){
                const cloakedWindow = window.open()
                var cloakedFrame = cloakedWindow.document.createElement("iframe")
                cloakedFrame.src = "https://bonk-lord-of-toes.github.io/website/"
                cloakedFrame.style = "border:0px;width:100%;height:100vh;"
                cloakedWindow.document.body.appendChild(cloakedFrame)
            }
        </script>
    </body>
    </html>
